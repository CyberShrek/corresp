<script>
    import ParamsForm from "./components/ParamsForm/ParamsForm.svelte"
    import Report1 from "./components/reports/Report1.svelte"
    import Report2 from "./components/reports/Report2.svelte"
    import Report3 from "./components/reports/Report3.svelte"
    import Report4 from "./components/reports/Report4.svelte"
    import Report5 from "./components/reports/Report5.svelte"
    import Report6 from "./components/reports/Report6.svelte"
    import FloatButton from "./components/common/FloatButton.svelte"
    import {scrollInto} from "./utils"
    import Report7 from "./components/reports/Report7.svelte";

    let report1Input, report2Input, report3Input, report4Input, report5Input, report6Input, report7Input

    let scrollY

    let test0 = {"date1":"2020-12-01","date2":"2020-12-31","compareWithLastYear":false,"carrierCode":"1","fromCodes":["2010264","2010400","2010316","2010234","2010322","2010010","2010044","2010214","2010156","2010046","2010328","2010300","2010273","2010362","2010020","2010158","2010365","2010353","2010105","2010124","2010092","2010296","2010159","2010825","2010201","2010030","2010019","2010040","2010183","2010252","2010313","2010817","2010269","2010022","2010241","2010186","2010324","2010359","2010258","2010061","2010029","2010299","2010051","2011304","2010247","2010086","2010035","2010050","2010844","2010142","2010074","2010103","2010087","2010211","2010229","2010083","2010162","2010277","2010298","2010170","2010344","2010157","2010093","2010137","2010060","2010175","2010107","2010202","2010024","2010079","2010223","2010317","2010070","2010131","2010275","2010349","2010224","2010080","2010292","2010090","2010145","2010160","2010102","2010148","2010014","2010180","2010303","2010039","2010036","2010138","2010134","2010006","2010266","2011170","2010279","2010114","2010193","2010089","2010190","2010254","2010113","2010048","2010210","2010166","2010023","2010198","2010256","2010215","2010311","2010188","2010257","2010366","2010126","2010261","2010016","2010259","2010220","2010230","2010021","2010111","2010110","2011314","2010286","2010011","2010227","2010312","2010240","2010194","2010032","2010154","2010045","2010244","2010017","2011321","2010192","2010003","2010033","2010217","2010196","2010272","2010226","2010250","2010085","2010232","2010321","2010305","2010122","2010260","2010320","2010062","2010278","2010225","2010165","2010064","2010104","2010189","2010121","2010127","2010270","2011329","2010287","2010141","2010243","2010168","2010280","2010077","2010084","2010308","2011291","2010203","2010097","2010106","2010369","2010005","2010118","2010132","2010012","2010119","2010068","2010330","2010152","2010219","2010095","2010047","2010294","2010164","2010326","2010271","2010206","2010802","2010125","2010290","2010082","2010099","2011225","2010108","2010058","2010237","2010037","2010144","2010249","2010172","2010251","2010031","2010042","2010199","2011183","2010304","2010143","2010184","2010302","2010329","2010098","2010332","2010310","2010053","2010128","2010246","2010094","2010002","2010001"],
                                                                                                           "toCodes":["2030571","2030530","2030213","2030138","2030245","2030160","2030167","2030184","2030054","2030059","2030065","2030043","2030051","2030234","2030136","2030082","2030081","2030251","2030276","2030216","2030050","2030073","2030044","2030089","2031294","2030262","2030232","2030018","2030286","2030443","2030119","2030268","2030125","2030151","2030010","2030150","2030165","2030285","2030168","2030127","2030147","2030261","2030036","2030258","2030525","2030155","2030489","2030143","2030166","2030169","2030270","2030137","2030006","2031191","2030289","2030233","2030470","2030077","2031154","2030588","2030015","2030152","2030042","2030190","2030287","2030000","2030473","2030559","2030027","2030264","2030083","2030504","2030176","2031333","2030066","2030112","2030591","2030180","2030053","2030280","2031445","2030592","2030102","2030240","2030290","2030274","2030145","2030254","2030156","2030196","2030570","2030139","2030292","2030002","2030060","2030028","2030310","2030087","2030058","2030098","2030163","2030164","2030214","2030075","2030033","2030317","2031334","2031370","2030063","2030468","2030293","2030157","2030154","2030039","2030026","2030544","2030231","2030020","2030011","2030597","2030141","2030108","2030088","2030271","2030179","2030013","2030032","2030546","2030149","2030104","2030095","2030148","2030654","2030277","2030282","2030531","2030183","2030279","2030640","2030005","2031376","2030294","2030068","2030215","2030542","2030128","2030201","2030024","2030114","2030078","2030118","2030207","2030115","2030308","2030067","2030080","2030130","2030266","2030281","2030319","2030309","2030312","2030008","2030526","2030492","2030491","2030009","2030259","2030260","2031198","2030246","2030014","2030019","2030189","2030086","2030046","2030467","2030090","2030400","2030012","2030175","2030144","2030256","2030045","2030161","2030071","2030288","2030177","2031288","2030195","2030295","2030247","2031374","2030315","2030314","2030607","2030243","2030540","2030578","2030076","2030500","2030030","2030209","2030038","2030606","2030206","2030134","2030052","2030048","2030178","2030638","2030162","2030140","2030320","2030520","2030574","2030273","2030496","2030124","2030040","2030193","2030188","2030123","2030541","2030576","2030600","2030316","2030096","2030170","2030250","2030226","2031150","2030091","2030284","2030252","2030222","2030568","2030100","2030186","2030022","2031446","2030109","2030535","2030283","2030092","2030217","2030079","2030084","2030113","2030257","2030318","2030023","2030187","2030198","2030313","2030111","2030238","2030061","2030007","2030001","2030248","2030070","2030278","2030450","2030197","2030037","2030035","2030055","2030021","2030472","2030029","2030117","2030025","2030307","2030253","2030249","2030074","2030263","2030016","2030132"]}

    let test1 = {"date1":"2020-12-01","date2":"2020-12-31","compareWithLastYear":true,"carrierCode":"1","fromCodes":["2010264","2010400","2010316","2010234","2010322","2010010","2010044","2010214","2010156","2010046","2010328","2010300","2010273","2010362","2010020","2010158","2010365","2010353","2010105","2010124","2010092","2010296","2010159","2010825","2010201","2010030","2010019","2010040","2010183","2010252","2010313","2010817","2010269","2010022","2010241","2010186","2010324","2010359","2010258","2010061","2010029","2010299","2010051","2011304","2010247","2010086","2010035","2010050","2010844","2010142","2010074","2010103","2010087","2010211","2010229","2010083","2010162","2010277","2010298","2010170","2010344","2010157","2010093","2010137","2010060","2010175","2010107","2010202","2010024","2010079","2010223","2010317","2010070","2010131","2010275","2010349","2010224","2010080","2010292","2010090","2010145","2010160","2010102","2010148","2010014","2010180","2010303","2010039","2010036","2010138","2010134","2010006","2010266","2011170","2010279","2010114","2010193","2010089","2010190","2010254","2010113","2010048","2010210","2010166","2010023","2010198","2010256","2010215","2010311","2010188","2010257","2010366","2010126","2010261","2010016","2010259","2010220","2010230","2010021","2010111","2010110","2011314","2010286","2010011","2010227","2010312","2010240","2010194","2010032","2010154","2010045","2010244","2010017","2011321","2010192","2010003","2010033","2010217","2010196","2010272","2010226","2010250","2010085","2010232","2010321","2010305","2010122","2010260","2010320","2010062","2010278","2010225","2010165","2010064","2010104","2010189","2010121","2010127","2010270","2011329","2010287","2010141","2010243","2010168","2010280","2010077","2010084","2010308","2011291","2010203","2010097","2010106","2010369","2010005","2010118","2010132","2010012","2010119","2010068","2010330","2010152","2010219","2010095","2010047","2010294","2010164","2010326","2010271","2010206","2010802","2010125","2010290","2010082","2010099","2011225","2010108","2010058","2010237","2010037","2010144","2010249","2010172","2010251","2010031","2010042","2010199","2011183","2010304","2010143","2010184","2010302","2010329","2010098","2010332","2010310","2010053","2010128","2010246","2010094","2010002","2010001"],
                                                                                                          "toCodes":["2030571","2030530","2030213","2030138","2030245","2030160","2030167","2030184","2030054","2030059","2030065","2030043","2030051","2030234","2030136","2030082","2030081","2030251","2030276","2030216","2030050","2030073","2030044","2030089","2031294","2030262","2030232","2030018","2030286","2030443","2030119","2030268","2030125","2030151","2030010","2030150","2030165","2030285","2030168","2030127","2030147","2030261","2030036","2030258","2030525","2030155","2030489","2030143","2030166","2030169","2030270","2030137","2030006","2031191","2030289","2030233","2030470","2030077","2031154","2030588","2030015","2030152","2030042","2030190","2030287","2030000","2030473","2030559","2030027","2030264","2030083","2030504","2030176","2031333","2030066","2030112","2030591","2030180","2030053","2030280","2031445","2030592","2030102","2030240","2030290","2030274","2030145","2030254","2030156","2030196","2030570","2030139","2030292","2030002","2030060","2030028","2030310","2030087","2030058","2030098","2030163","2030164","2030214","2030075","2030033","2030317","2031334","2031370","2030063","2030468","2030293","2030157","2030154","2030039","2030026","2030544","2030231","2030020","2030011","2030597","2030141","2030108","2030088","2030271","2030179","2030013","2030032","2030546","2030149","2030104","2030095","2030148","2030654","2030277","2030282","2030531","2030183","2030279","2030640","2030005","2031376","2030294","2030068","2030215","2030542","2030128","2030201","2030024","2030114","2030078","2030118","2030207","2030115","2030308","2030067","2030080","2030130","2030266","2030281","2030319","2030309","2030312","2030008","2030526","2030492","2030491","2030009","2030259","2030260","2031198","2030246","2030014","2030019","2030189","2030086","2030046","2030467","2030090","2030400","2030012","2030175","2030144","2030256","2030045","2030161","2030071","2030288","2030177","2031288","2030195","2030295","2030247","2031374","2030315","2030314","2030607","2030243","2030540","2030578","2030076","2030500","2030030","2030209","2030038","2030606","2030206","2030134","2030052","2030048","2030178","2030638","2030162","2030140","2030320","2030520","2030574","2030273","2030496","2030124","2030040","2030193","2030188","2030123","2030541","2030576","2030600","2030316","2030096","2030170","2030250","2030226","2031150","2030091","2030284","2030252","2030222","2030568","2030100","2030186","2030022","2031446","2030109","2030535","2030283","2030092","2030217","2030079","2030084","2030113","2030257","2030318","2030023","2030187","2030198","2030313","2030111","2030238","2030061","2030007","2030001","2030248","2030070","2030278","2030450","2030197","2030037","2030035","2030055","2030021","2030472","2030029","2030117","2030025","2030307","2030253","2030249","2030074","2030263","2030016","2030132"]}

</script>

<svelte:window bind:scrollY/>

<p> Анализ корреспонденций пассажиропотоков </p>

<ParamsForm on:generateReport1={(event) => { report1Input = event.detail }}/>

<div on:click={() => report1Input = test0}>Тест</div>
<div on:click={() => report1Input = test1}>Тест со сравнением с прошлым годом</div>

{#if report1Input}
    <Report1 inputParams={report1Input}
             on:generateReport2={(event) => report2Input = event.detail}

             on:generateReport4={(event) => report4Input = event.detail}
             on:generateReport5={(event) => report5Input = event.detail}
             on:generateReport7={(event) => report7Input = event.detail}/>
{/if}

{#if report2Input}
    <Report2 inputParams={report2Input} on:exit={() => report2Input = null}/>
{/if}
{#if report3Input}
    <Report3 inputParams={report3Input}/>
{/if}
{#if report4Input}
    <Report4 inputParams={report4Input}/>
{/if}
{#if report5Input}
    <Report5 inputParams={report5Input}/>
{/if}
{#if report6Input}
    <Report6 inputParams={report6Input}/>
{/if}
{#if report7Input}
    <Report7 inputParams={report7Input}/>
{/if}

{#if (scrollY > 100)}
    <FloatButton title="Вернуться наверх"
                 image="img/to_top.svg"
                 right="20"
                 on:click={() => scrollInto(document.body)}/>
{/if}

<style>

    div {
        cursor: pointer;
        color: blue;
        align-items: center;
        justify-self: center;
        font-size: x-large;
    }
    p {
        text-align: center;
        font-size: x-large;
    }
</style>